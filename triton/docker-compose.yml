services:
  triton:
    profiles: ["full", "triton"]
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # You can override to a tag you have access to (NGC, GHCR, etc.)
        - BASE_IMAGE=${TRITON_BASE_IMAGE:-nvcr.io/nvidia/tritonserver:23.05-py3}
    image: triton-local:latest
    # Common Triton ports: HTTP 8000, gRPC 8001, Metrics 8002
    ports:
      - "8000:8000"
      - "8001:8001"
      - "8002:8002"
    volumes:
      - ./models:/models:ro
    restart: unless-stopped
    environment:
      - TRITON_MODEL_REPOSITORY=/models
